<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel="icon" type="image/png" href="/images/favicon.png">
  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/global.css">
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
  <link rel="stylesheet" href="css/city.css">
  <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet'>
  <link href="https://fonts.googleapis.com/css?family=Libre Baskerville" rel="stylesheet">
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
  <script type="text/javascript" src="/js/header.js"></script>
  <script type="text/javascript" src="data/stockton.geojson"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174685284-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-174685284-1');
  </script>
  <title>Stockton Crime Map - 209 Politics</title>
</head>

<body>
  <div id="content">
    <div id="headercontainer">
      <button type="button" id="sidebar" onclick="sidebar();">&#9776;</button>
      <div id="logocontainer">
        <a href="https://209politics.com/">
          <img src="/images/favicon-horizontal.png" alt="209 Politics" id="logo">
        </a>
      </div>
      <div id="searchcontainer">
        <div id="searchimgcontainer" onclick="searchtoggle();">
          <img src="/images/search.svg" alt="Search sybmol" id="searchimg">
        </div>
        <div id="formcontainer1">
          <form id="searchform" action="https://www.google.com/search" method="get">
            <input type="hidden" name="q" value="site:209politics.com">
            <input type="text" name="q" value="" id="searchbox1">
            <input type="submit" value="GO" class="searchbutton" id="searchbutton1">
          </form>
        </div>
      </div>
    </div>
    <div id="sectionscontainer" class="sections">
      <div id="homenavcontainer" class="headernavcontainer">
        <a href="https://209politics.com/" id="latest" class="section">HOME</a>
      </div>
      <div id="latestnavcontainer" class="headernavcontainer">
        <a href="/latest" id="latest" class="section">LATEST</a>
      </div>
      <div id="electionsnavcontainer" class="headernavcontainer">
        <a href="/elections" id="elections" class="section">ELECTIONS</a>
      </div>
      <div id="policynavcontainer" class="headernavcontainer">
        <a href="/policy" class="section">POLICY</a>
      </div>
      <div id="covidnavcontainer" class="headernavcontainer">
        <a href="/covid-19" class="section">COVID-19</a>
      </div>
      <div id="intnavcontainer" class="headernavcontainer">
        <a href="/interactives" class="section">INTERACTIVES</a>
      </div>
    </div>
    <div id="formcontainer2">
      <form id="searchform" action="https://www.google.com/search" method="get">
        <input type="hidden" name="q" value="site:209politics.com">
        <input type="text" name="q" value="" id="searchbox2">
        <input type="submit" value="GO" class="searchbutton" id="searchbutton1">
      </form>
    </div>
    <div id="filler"></div>
    <div id="titlecontainer">
      <h1 id="title">STOCKTON CRIME MAP</h1>
    </div>
    <div id="map"></div>
    <div id="filtercontainer">
      <div class="filters">
        <p class="filtertitle">Date Range</p>
          <div class="filterbox">
            <label for="startdate" class="filter">Start: </label>
            <input type="date" id="startdate" class="dateselect" onchange="datefilter('start');" checked="true">
          </div>
          <div class="filterbox">
            <label for="enddate" class="filter">End: </label>
            <input type="date" id="enddate" class="dateselect" onchange="datefilter('end');" checked="true">
          </div>
      </div>
      <div class="filters">
        <p class="filtertitle">Type</p><div class="filterbox">
<input type="checkbox" id="Vehicle/traffic" class="checkbox" onchange="filter('Vehicle/traffic');" checked="true">
<label for="Vehicle/traffic" class="filter">Vehicle/traffic</label>
</div><div class="filterbox">
<input type="checkbox" id="Homicide" class="checkbox" onchange="filter('Homicide');" checked="true">
<label for="Homicide" class="filter">Homicide</label>
</div><div class="filterbox">
<input type="checkbox" id="Theft/robbery" class="checkbox" onchange="filter('Theft/robbery');" checked="true">
<label for="Theft/robbery" class="filter">Theft/robbery</label>
</div><div class="filterbox">
<input type="checkbox" id="Assault" class="checkbox" onchange="filter('Assault');" checked="true">
<label for="Assault" class="filter">Assault</label>
</div><div class="filterbox">
<input type="checkbox" id="Weapon" class="checkbox" onchange="filter('Weapon');" checked="true">
<label for="Weapon" class="filter">Weapon</label>
</div><div class="filterbox">
<input type="checkbox" id="Other" class="checkbox" onchange="filter('Other');" checked="true">
<label for="Other" class="filter">Other</label>
</div>
</div>
</div><div id="footer">
      <p id="socialmediafooter">
        <a href="https://twitter.com/209Politics" id="twitterfooter" class="sociallinkfooter">Twitter: @209politics</a> •
        <a href="https://www.instagram.com/209.politics/" id="instagramfooter" class="sociallinkfooter">Instagram: @209.politics</a> •
        <a href="https://www.facebook.com/209politics" id="facebookfooter" class="sociallinkfooter">Facebook: @209Politics</a>
      </p>
      <p id="navfooter">
        <a href="https://209politics.com/" id="homenavfooter" class="navfooter">Home</a> •
        <a href="/latest" id="latestnavfooter" class="navfooter">Latest</a> •
        <a href="/elections" id="electionsnavfooter" class="navfooter">Elections</a> •
        <a href="/policy" id="policynavfooter" class="navfooter">Policy</a> •
        <a href="/covid-19" id="covidnavfooter" class="navfooter">COVID-19</a> •
        <a href="/interactives" id="covidnavfooter" class="navfooter">Interactives</a> •
        <a href="/contact" id="contactnavfooter" class="navfooter">Contact us</a>
      </p>
    </div>
    <script type="text/javascript">
    var map = L.map('map').setView([38.007220, -121.289592], 11);
    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
      attribution: 'Map data &copy; <a target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>, <a target="_blank" href="https://github.com/calvinmetcalf/leaflet.shapefile">Calvin Metcalf</a> - Shapefile plugin, <a target="_blank" href="https://statewidedatabase.org/">CA SWDB</a>/<a href="https://www.sjgov.org/department/rov/">SJ ROV</a> - Data',
      maxZoom: 18,
      id: 'mapbox/streets-v11',
      tileSize: 512,
      zoomOffset: -1,
      accessToken: 'pk.eyJ1IjoibWlyaWFtd2FsZHZvZ2VsIiwiYSI6ImNraTE3OHBxbDE3aWcycW9kbnhibHY2cDUifQ.ANw8-FHVLnsxyvEYyCyhvA'
    }).addTo(map);
    var mainlayer = L.geoJSON(markers, {onEachFeature: onEachFeature}).addTo(map);
    function show(e) {
      var a = e.target.nextElementSibling;
      a.style.display = "block";
      a.nextElementSibling.style.display = "block";
      e.target.style.display = "none";
    };
    function hide(e) {
      var a = e.target.previousElementSibling;
      a.style.display = "none";
    }
    function onEachFeature(feature, layer){
      layer.bindPopup("<p class='popuptitle'>"+feature.properties.type+"</p><p class='info'>"+feature.properties.date+" at "+feature.properties.time+" - "+feature.properties.location+"</p><p class='details' onclick='show(event);'>Details</p><p class='desc' style='display: none;'>"+feature.properties.desc+"</p><p class='hide' style='display: none;' onclick='hide(event);'>Hide</p>");
    }
    function datefilter(se){
      var filterlayer = [];
      if (se === 'start'){
        var d = Date.parse(document.getElementById("startdate").value);
        for (var i = 0; i < markers.length; i++){
          if (Date.parse(markers[i].properties.date) < d){
            markers[i].properties.appear = 0;
          }
        }
      } else{
        var d = Date.parse(document.getElementById("enddate").value);
        for (var i = 0; i < markers.length; i++){
          if (Date.parse(markers[i].properties.date) > d){
            markers[i].properties.appear = 0;
          }
        }
      }
      for (var i = 0; i < markers.length; i++){
        if (markers[i].properties.appear === 1){
          filterlayer.push(markers[i])
        }
      }
      map.removeLayer(mainlayer);
      mainlayer = L.geoJSON(filterlayer, {onEachFeature: onEachFeature}).addTo(map);
    }
  function filter(t){
    var filterlayer = [];
    var a = document.getElementById(t.replaceAll(" ", "-"));
    if (a.checked){
      for (var i = 0; i < markers.length; i++){
        if (types[t].includes(markers[i].properties.type)){
          markers[i].properties.appear = 1;
        }
      }
    } else{
      for (var i = 0; i < markers.length; i++){
        if (types[t].includes(markers[i].properties.type)){
          markers[i].properties.appear = 0;
        }
      }
    }
    for (var i = 0; i < markers.length; i++){
      if (markers[i].properties.appear === 1){
        filterlayer.push(markers[i])
      }
    }
    map.removeLayer(mainlayer);
    mainlayer = L.geoJSON(filterlayer, {onEachFeature: onEachFeature}).addTo(map);
  }
    </script>
</div>
</body>
</html>
