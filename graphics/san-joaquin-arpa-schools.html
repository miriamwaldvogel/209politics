<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="san-joaquin-arpa-schools.css">
    <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css?family=Libre Baskerville" rel="stylesheet">
    <link rel="stylesheet" href="/css/leaflet.css">
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
    <script src="/js/leaflet.ajax.min.js"></script>
    <script type="text/javascript" src="/js/header.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174685284-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-174685284-1');
      </script>
    <title>School Stimulus Funding in San Joaquin County - 209 Politics</title>
  </head>
  <body>
    <div id="content">
      <div id="headercontainer">
        <button type="button" id="sidebar" onclick="sidebar();">&#9776;</button>
        <div id="logocontainer">
          <a href="https://209politics.com/">
            <img src="/images/favicon-horizontal.png" alt="209 Politics" id="logo">
          </a>
        </div>
        <div id="searchcontainer">
          <div id="searchimgcontainer" onclick="searchtoggle();">
            <img src="/images/search.svg" alt="Search sybmol" id="searchimg">
          </div>
          <div id="formcontainer1">
            <form id="searchform" action="https://www.google.com/search" method="get">
              <input type="hidden" name="q" value="site:209politics.com">
              <input type="text" name="q" value="" id="searchbox1">
              <input type="submit" value="GO" class="searchbutton" id="searchbutton1">
            </form>
        </div>
        </div>
      </div>
      <div id="sectionscontainer" class="sections">
        <div id="homenavcontainer" class="headernavcontainer">
          <a href="https://209politics.com/" id="latest" class="section">HOME</a>
        </div>
        <div id="latestnavcontainer" class="headernavcontainer">
          <a href="/latest" id="latest" class="section">LATEST</a>
        </div>
        <div id="electionsnavcontainer" class="headernavcontainer">
          <a href="/elections" id="elections" class="section">ELECTIONS</a>
        </div>
        <div id="policynavcontainer" class="headernavcontainer">
          <a href="/policy" class="section">POLICY</a>
        </div>
        <div id="covidnavcontainer" class="headernavcontainer">
          <a href="/covid-19" class="section">COVID-19</a>
        </div>
        <div id="intnavcontainer" class="headernavcontainer">
          <a href="/interactives" class="section">INTERACTIVES</a>
        </div>
      </div>
      <div id="formcontainer2">
        <form id="searchform" action="https://www.google.com/search" method="get">
          <input type="hidden" name="q" value="site:209politics.com">
          <input type="text" name="q" value="" id="searchbox2">
          <input type="submit" value="GO" class="searchbutton" id="searchbutton1">
        </form>
      </div>
      <div id="filler"></div>
      <div id="infocontainer">
        <h1 id="title">STIMULUS FUNDING FOR SCHOOL DISTRICTS IN SAN JOAQUIN COUNTY</h1>
      </div>
      <div id="map"></div>
      <div id="footer">
      <p id="socialmediafooter">
        <a href="https://twitter.com/209Politics" id="twitterfooter" class="sociallinkfooter">Twitter: @209politics</a> •
        <a href="https://www.instagram.com/209.politics/" id="instagramfooter" class="sociallinkfooter">Instagram: @209.politics</a> •
        <a href="https://www.facebook.com/209politics" id="facebookfooter" class="sociallinkfooter">Facebook: @209Politics</a>
      </p>
      <p id="navfooter">
        <a href="https://209politics.com/" id="homenavfooter" class="navfooter">Home</a> •
        <a href="/latest" id="latestnavfooter" class="navfooter">Latest</a> •
        <a href="/elections" id="electionsnavfooter" class="navfooter">Elections</a> •
        <a href="/policy" id="policynavfooter" class="navfooter">Policy</a> •
        <a href="/covid-19" id="covidnavfooter" class="navfooter">COVID-19</a> •
        <a href="/interactives" id="covidnavfooter" class="navfooter">Interactives</a> •
<a href="/contact" id="contactnavfooter" class="navfooter">Contact us</a>
      </p>
    </div>
      <script type="text/javascript" src="/js/leaflet.shpfile.js"></script>
      <script type="text/javascript" src="/js/shp.js"></script>
      <script src="/raw/arpa-funding/school-districts.js"></script>
      <script type="text/javascript">
        var map = L.map('map').setView([37.941151, -121.266734], 9);
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
      attribution: 'Map data &copy; <a target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>, <a target="_blank" href="https://github.com/calvinmetcalf/leaflet.shapefile">Calvin Metcalf</a> - Shapefile plugin',
      maxZoom: 18,
      id: 'mapbox/light-v10',
      tileSize: 512,
      zoomOffset: -1,
      accessToken: 'pk.eyJ1IjoibWlyaWFtd2FsZHZvZ2VsIiwiYSI6ImNraTE3OHBxbDE3aWcycW9kbnhibHY2cDUifQ.ANw8-FHVLnsxyvEYyCyhvA'
  }).addTo(map);
function color(d){
  return d > 7000 ? '#023858':
           d > 4000 ? '#034e7b':
           d > 3000 ? '#0570b0':
           d > 2000 ? '#3690c0':
           d > 1500 ? '#74a9cf':
           d > 1000 ? '#a6bddb':
           d > 300 ? '#d0d1e6':
                     '#ece7f2';
}
function elemstyle(feature){
  return{
        "opacity": 1,
        "color": "#E0E0E0",
        "fillColor": color(parseInt(districts[feature.properties.ELEMENTARY.toString()][2])),
        "fillOpacity": 0.8,
        "weight": 2,
  }
}
function hsstyle(feature){
  return{
        "opacity": 1,
        "color": "#E0E0E0",
        "fillColor": color(parseInt(districts[feature.properties.HIGHSCHOOL.toString()][2])),
        "fillOpacity": 0.8,
        "weight": 2,
  }
}
function highlight(e){
  var layer = e.target;
  layer.setStyle({
      weight: 2,
      color: '#666666',
      dashArray: '',
  });
  if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
      layer.bringToFront();
  }
}
function popup(e, a){
  var layer = e.target;
  s = "<p class='district'>"+layer.feature.properties.ELEMENTARY.toString()+"</p><p>American Rescue Plan relief: $"+a[0]+"</p><p>Number of students: "+a[1]+"</p><p>Relief per student: $"
  if (a[2] > 999){
    s += a[2].toString().substring(0, 1)+","+a[2].toString().substring(1, a[2].length);
  } else{
    s += a[2];
  }
  s += "</p>"
  return(s)
}
function elemhighlight(e){
  var layer = e.target;
  highlight(e);
  a = districts[layer.feature.properties.ELEMENTARY.toString()];
  layer.bindPopup(popup(e, a)).openPopup();
}
function hshighlight(e){
  var layer = e.target;
  highlight(e);
  a = districts[layer.feature.properties.HIGHSCHOOL.toString()];
  layer.bindPopup(popup(e, a)).openPopup();
}
function elemreset(e) {
  elemlayer.resetStyle(e.target);
  e.target.closePopup();
}
function hsreset(e) {
  hslayer.resetStyle(e.target);
  e.target.closePopup();
}
function elemfeature(feature, layer){
  layer.on({
    mouseover: elemhighlight,
    mouseout: elemreset
  });
}
function hsfeature(feature, layer){
  layer.on({
    mouseover: hshighlight,
    mouseout: hsreset
  });
}
var elemlayer = new L.Shapefile('/raw/sj-elem-districts.zip', {style: elemstyle, onEachFeature: elemfeature});
elemlayer.addTo(map);
var hslayer = new L.Shapefile('/raw/sj-hs-districts.zip', {style: hsstyle, onEachFeature: hsfeature});
var schoollayers = {
  "Elementary School Districts": elemlayer,
  "High School Districts": hslayer
};
L.control.layers(schoollayers).addTo(map);
      </script>
    </div>
  </body>
</html>
